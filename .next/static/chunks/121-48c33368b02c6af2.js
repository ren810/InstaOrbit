"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[121],{8271:function(e,t,s){s.d(t,{f:function(){return h}});var a=s(3827),n=s(4090),r=s(3818),o=s(7898),l=s(9108),i=s(7805),c=s(10),d=s(1213),b=s(1988),m=s(5431),x=s(6490),u=s(4715),p=s(2416);let h=e=>{let{result:t,playSound:s}=e,[h,g]=(0,n.useState)(0),[f,v]=(0,n.useState)(!1),[j,w]=(0,n.useState)(!1),[N,y]=(0,n.useState)(!1),[k,T]=(0,n.useState)(!1),[A,C]=(0,n.useState)(""),[E,_]=(0,n.useState)(!1),R=t.mediaUrls||[],S=R.length>1,z=S?R[h]:null,V=(null==z?void 0:z.thumbnail)||t.thumbnail,D=(null==z?void 0:z.url)||t.downloadUrl,Z=(null==z?void 0:z.type)||t.type,I=e=>"/api/proxy-image?url=".concat(encodeURIComponent(e)),L=I(V);(0,n.useEffect)(()=>{S&&R.length>0&&[h,(h+1)%R.length,(h-1+R.length)%R.length].forEach(e=>{new Image().src=I(R[e].thumbnail)})},[h,S,R]),(0,n.useEffect)(()=>{w(!1)},[h]),console.log("Carousel Debug:",{isCarousel:S,mediaCount:R.length,currentIndex:h,displayThumbnail:V,imageLoaded:j});let U=async()=>{if(S){s("success"),T(!0);for(let e=0;e<R.length;e++)C("Downloading ".concat(e+1," of ").concat(R.length,"...")),await M(R[e].url,"instagram_".concat(e+1,".").concat("video"===R[e].type?"mp4":"jpg")),e<R.length-1&&await new Promise(e=>setTimeout(e,1e3));T(!1),C("")}},M=async(e,t)=>{try{let s=await fetch("/api/download-media",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})});if(!s.ok)throw Error("Download failed");let a=await s.blob(),n=window.URL.createObjectURL(a),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout(()=>window.URL.revokeObjectURL(n),100)}catch(t){console.error("Download failed:",t),window.open(e,"_blank")}},q=async()=>{s("success"),y(!0),C("Preparing download...");let e=S?"instagram_".concat(h+1,".").concat("video"===Z?"mp4":"jpg"):"instagram.".concat("video"===Z?"mp4":"jpg");await M(D,e),y(!1),C("")};return(0,a.jsx)(r.E.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{type:"spring",stiffness:50,damping:20},className:"w-full max-w-5xl mt-12",children:(0,a.jsxs)("div",{className:"bg-base-300 p-[1px] relative overflow-hidden clip-corner shadow-2xl",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-base-500/50 to-transparent z-10"}),(0,a.jsxs)("div",{className:"bg-base-400 grid grid-cols-1 md:grid-cols-12 gap-0 md:gap-[1px] border border-base-300 relative z-0",children:[(0,a.jsxs)("div",{className:"md:col-span-5 relative group bg-black overflow-hidden aspect-[4/5] md:aspect-auto min-h-[400px]",children:[!j&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-base-400/50 backdrop-blur-sm z-30",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-base-500 border-t-transparent rounded-full animate-spin"}),(0,a.jsxs)("p",{className:"text-base-100 font-mono text-sm",children:["Loading image ",h+1,"..."]})]})}),(0,a.jsx)("img",{src:L,alt:t.title||"Instagram media",className:"absolute inset-0 w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity duration-200",onLoad:()=>{console.log("Image loaded:",h,L),w(!0)},onError:e=>{console.error("Image failed to load:",h,L,e),w(!0)}},"img-".concat(h,"-").concat(V)),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-base-400 via-transparent to-transparent opacity-90"}),S&&(0,a.jsxs)("div",{className:"absolute top-6 left-6 px-3 py-1 bg-base-500 text-base-400 font-mono text-xs font-bold tracking-widest uppercase flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-3 h-3"}),h+1,"/",R.length," CAROUSEL"]}),!S&&(0,a.jsxs)("div",{className:"absolute top-6 left-6 px-3 py-1 bg-base-500 text-base-400 font-mono text-xs font-bold tracking-widest uppercase",children:[(null==Z?void 0:Z.toUpperCase())||"MEDIA","_SECURED"]}),S&&R.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{if(S&&!f){v(!0);let e=0===h?R.length-1:h-1;console.log("Moving to previous:",e),g(e),s("click"),setTimeout(()=>v(!1),100)}},disabled:f,className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-base-400/90 backdrop-blur-sm border border-base-300 hover:bg-base-500 hover:border-base-500 transition-all flex items-center justify-center z-20 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(l.Z,{className:"w-6 h-6 text-base-100"})}),(0,a.jsx)("button",{onClick:()=>{if(S&&!f){v(!0);let e=h===R.length-1?0:h+1;console.log("Moving to next:",e),g(e),s("click"),setTimeout(()=>v(!1),100)}},disabled:f,className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-base-400/90 backdrop-blur-sm border border-base-300 hover:bg-base-500 hover:border-base-500 transition-all flex items-center justify-center z-20 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(i.Z,{className:"w-6 h-6 text-base-100"})}),(0,a.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 z-20",children:R.map((e,t)=>(0,a.jsx)("button",{onClick:()=>{f||t===h||(v(!0),g(t),s("click"),setTimeout(()=>v(!1),100))},className:"w-2 h-2 rounded-full transition-all ".concat(t===h?"bg-base-500 w-6":"bg-base-300 hover:bg-base-200")},t))})]}),"video"===Z&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,a.jsx)("div",{className:"w-20 h-20 rounded-full border border-base-100/30 flex items-center justify-center backdrop-blur-sm group-hover:scale-110 transition-transform duration-500",children:(0,a.jsx)("div",{className:"w-14 h-14 bg-base-100 text-base-400 rounded-full flex items-center justify-center pl-1 shadow-[0_0_30px_rgba(242,238,218,0.3)]",children:(0,a.jsx)(c.Z,{size:28,fill:"currentColor"})})})})]}),(0,a.jsxs)("div",{className:"md:col-span-7 flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"p-8 border-b border-base-300 bg-base-300/5 flex-grow-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("span",{className:"font-mono text-xs text-base-500 tracking-[0.2em] uppercase flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 bg-base-500 rounded-full"}),"Target Identified"]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("div",{className:"w-1 h-1 bg-base-500 rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"w-1 h-1 bg-base-500 rounded-full animate-pulse delay-75"}),(0,a.jsx)("div",{className:"w-1 h-1 bg-base-500 rounded-full animate-pulse delay-150"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h3",{className:"font-display text-3xl md:text-4xl text-base-100 leading-tight ".concat(E?"":"line-clamp-2"),children:t.caption||t.title}),(t.caption||t.title)&&(t.caption||t.title).length>100&&(0,a.jsx)("button",{onClick:()=>_(!E),className:"mt-2 text-xs font-mono text-base-500 hover:text-base-100 transition-colors uppercase tracking-wider",children:E?"← Show Less":"Show More →"})]}),(0,a.jsxs)("p",{className:"font-mono text-base-200 text-sm tracking-wide flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),t.username||t.author]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 divide-x divide-base-300 border-b border-base-300 bg-base-400 flex-grow-0",children:[(0,a.jsxs)("div",{className:"p-5 flex flex-col items-center justify-center gap-2 hover:bg-base-300/10 transition-colors",children:[(0,a.jsx)(b.Z,{size:20,className:"text-base-500",strokeWidth:1.5}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"block font-mono text-base-100 text-sm font-bold uppercase",children:Z||t.type||"MEDIA"}),(0,a.jsx)("span",{className:"block text-[10px] text-base-200 uppercase tracking-widest mt-1",children:"Type"})]})]}),(0,a.jsxs)("div",{className:"p-5 flex flex-col items-center justify-center gap-2 hover:bg-base-300/10 transition-colors",children:[(0,a.jsx)(m.Z,{size:20,className:"text-base-500",strokeWidth:1.5}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"block font-mono text-base-100 text-sm font-bold",children:(null==z?void 0:z.quality)||t.quality||"HD"}),(0,a.jsx)("span",{className:"block text-[10px] text-base-200 uppercase tracking-widest mt-1",children:"Quality"})]})]}),(0,a.jsxs)("div",{className:"p-5 flex flex-col items-center justify-center gap-2 hover:bg-base-300/10 transition-colors",children:[S?(0,a.jsx)(o.Z,{size:20,className:"text-base-500",strokeWidth:1.5}):(0,a.jsx)(x.Z,{size:20,className:"text-base-500",strokeWidth:1.5}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"block font-mono text-base-100 text-sm font-bold",children:S?"".concat(R.length," ITEMS"):"READY"}),(0,a.jsx)("span",{className:"block text-[10px] text-base-200 uppercase tracking-widest mt-1",children:S?"Count":"Status"})]})]})]}),(0,a.jsxs)("div",{className:"p-8 flex flex-col gap-6 justify-center bg-base-400 flex-grow",children:[(0,a.jsxs)("button",{onClick:q,onMouseEnter:()=>s("hover"),disabled:N||k,className:"group relative w-full h-20 bg-base-500 flex items-center justify-between px-8 overflow-hidden transition-all hover:bg-[#ff7a4d] clip-corner shadow-[0_0_20px_rgba(238,100,54,0.15)] hover:shadow-[0_0_30px_rgba(238,100,54,0.4)] cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsxs)("div",{className:"relative z-10 flex flex-col items-start gap-1",children:[(0,a.jsx)("span",{className:"font-mono text-[10px] text-base-400/80 font-bold tracking-[0.2em] uppercase group-hover:text-base-400",children:N?"Downloading...":S?"Download Item ".concat(h+1):"Secure Link Ready"}),(0,a.jsx)("span",{className:"font-display text-3xl text-base-400 leading-none mt-0.5",children:N?"PLEASE WAIT":"DOWNLOAD ".concat(S?"CURRENT":"FILE")})]}),(0,a.jsx)("div",{className:"relative z-10 w-12 h-12 bg-base-400/20 flex items-center justify-center rounded-sm group-hover:bg-base-400/30 transition-colors border border-base-400/10",children:N?(0,a.jsx)("div",{className:"w-7 h-7 border-3 border-base-400 border-t-transparent rounded-full animate-spin"}):(0,a.jsx)(u.Z,{className:"text-base-400 w-7 h-7"})}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:animate-[shimmer_1.5s_infinite]"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[S?(0,a.jsx)("button",{onClick:U,onMouseEnter:()=>s("hover"),disabled:N||k,className:"h-14 border border-base-300 hover:border-base-500/50 flex items-center justify-center gap-3 text-base-200 hover:text-base-100 hover:bg-base-300/10 transition-all text-xs font-mono uppercase tracking-widest group cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:k?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-base-500 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:A})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{size:16,className:"group-hover:text-base-500 transition-colors"}),(0,a.jsxs)("span",{children:["Download All (",R.length,")"]})]})}):(0,a.jsxs)("a",{href:D,target:"_blank",rel:"noopener noreferrer",onMouseEnter:()=>s("hover"),onClick:()=>s("click"),className:"h-14 border border-base-300 hover:border-base-500/50 flex items-center justify-center gap-3 text-base-200 hover:text-base-100 hover:bg-base-300/10 transition-all text-xs font-mono uppercase tracking-widest group",children:[(0,a.jsx)(c.Z,{size:16,className:"group-hover:text-base-500 transition-colors"}),(0,a.jsx)("span",{children:"Preview Media"})]}),(0,a.jsxs)("button",{onClick:()=>{s("click"),M(V,"instagram_thumbnail.jpg")},onMouseEnter:()=>s("hover"),className:"h-14 border border-base-300 hover:border-base-500/50 flex items-center justify-center gap-3 text-base-200 hover:text-base-100 hover:bg-base-300/10 transition-all text-xs font-mono uppercase tracking-widest group cursor-pointer",children:[(0,a.jsx)(p.Z,{size:16,className:"group-hover:text-base-500 transition-colors"}),(0,a.jsx)("span",{children:"Save Thumbnail"})]})]})]})]})]})]})})}},4566:function(e,t,s){s.d(t,{U:function(){return n}});var a=s(4090);let n=()=>{let e=(0,a.useRef)(null),t=()=>{e.current||(e.current=new(window.AudioContext||window.webkitAudioContext)),"suspended"===e.current.state&&e.current.resume()};return{playSound:(0,a.useCallback)(s=>{t();let a=e.current;if(!a)return;let n=a.createOscillator(),r=a.createGain();n.connect(r),r.connect(a.destination);let o=a.currentTime;"hover"===s?(n.type="sine",n.frequency.setValueAtTime(800,o),n.frequency.exponentialRampToValueAtTime(1200,o+.05),r.gain.setValueAtTime(.02,o),r.gain.exponentialRampToValueAtTime(.001,o+.05),n.start(o),n.stop(o+.05)):"click"===s?(n.type="triangle",n.frequency.setValueAtTime(300,o),n.frequency.exponentialRampToValueAtTime(50,o+.1),r.gain.setValueAtTime(.1,o),r.gain.exponentialRampToValueAtTime(.001,o+.1),n.start(o),n.stop(o+.1)):"success"===s?[440,554,659,880].forEach((e,t)=>{let s=a.createOscillator(),n=a.createGain();s.connect(n),n.connect(a.destination),s.type="square",s.frequency.value=e;let r=o+.05*t;n.gain.setValueAtTime(0,r),n.gain.linearRampToValueAtTime(.05,r+.02),n.gain.exponentialRampToValueAtTime(.001,r+.3),s.start(r),s.stop(r+.3)}):"error"===s&&(n.type="sawtooth",n.frequency.setValueAtTime(100,o),n.frequency.linearRampToValueAtTime(50,o+.3),r.gain.setValueAtTime(.1,o),r.gain.linearRampToValueAtTime(.001,o+.3),n.start(o),n.stop(o+.3))},[])}}}}]);