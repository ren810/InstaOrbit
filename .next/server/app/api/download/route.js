"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/download/route";
exports.ids = ["app/api/download/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdownload%2Froute&page=%2Fapi%2Fdownload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdownload%2Froute.ts&appDir=C%3A%5CUsers%5Criyan%5CDownloads%5Ccopy-of-instaorbit-downloader%20(3)1%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Criyan%5CDownloads%5Ccopy-of-instaorbit-downloader%20(3)1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdownload%2Froute&page=%2Fapi%2Fdownload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdownload%2Froute.ts&appDir=C%3A%5CUsers%5Criyan%5CDownloads%5Ccopy-of-instaorbit-downloader%20(3)1%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Criyan%5CDownloads%5Ccopy-of-instaorbit-downloader%20(3)1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_riyan_Downloads_copy_of_instaorbit_downloader_3_1_src_app_api_download_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/download/route.ts */ \"(rsc)/./src/app/api/download/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/download/route\",\n        pathname: \"/api/download\",\n        filename: \"route\",\n        bundlePath: \"app/api/download/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\riyan\\\\Downloads\\\\copy-of-instaorbit-downloader (3)1\\\\src\\\\app\\\\api\\\\download\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_riyan_Downloads_copy_of_instaorbit_downloader_3_1_src_app_api_download_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/download/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZkb3dubG9hZCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZG93bmxvYWQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZkb3dubG9hZCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNyaXlhbiU1Q0Rvd25sb2FkcyU1Q2NvcHktb2YtaW5zdGFvcmJpdC1kb3dubG9hZGVyJTIwKDMpMSU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDcml5YW4lNUNEb3dubG9hZHMlNUNjb3B5LW9mLWluc3Rhb3JiaXQtZG93bmxvYWRlciUyMCgzKTEmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDa0Q7QUFDL0g7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnN0YS1vcmJpdC1kb3dubG9hZGVyLz8xZGZjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXHJpeWFuXFxcXERvd25sb2Fkc1xcXFxjb3B5LW9mLWluc3Rhb3JiaXQtZG93bmxvYWRlciAoMykxXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGRvd25sb2FkXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9kb3dubG9hZC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2Rvd25sb2FkXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9kb3dubG9hZC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXHJpeWFuXFxcXERvd25sb2Fkc1xcXFxjb3B5LW9mLWluc3Rhb3JiaXQtZG93bmxvYWRlciAoMykxXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGRvd25sb2FkXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2Rvd25sb2FkL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdownload%2Froute&page=%2Fapi%2Fdownload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdownload%2Froute.ts&appDir=C%3A%5CUsers%5Criyan%5CDownloads%5Ccopy-of-instaorbit-downloader%20(3)1%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Criyan%5CDownloads%5Ccopy-of-instaorbit-downloader%20(3)1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/download/route.ts":
/*!***************************************!*\
  !*** ./src/app/api/download/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_usage_tracker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/usage-tracker */ \"(rsc)/./src/lib/usage-tracker.ts\");\n\n\n// Instagram Download API using RapidAPI\nasync function POST(request) {\n    try {\n        const { url } = await request.json();\n        // Validate URL\n        if (!url || typeof url !== \"string\") {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"URL is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate Instagram URL format\n        const instagramRegex = /^https?:\\/\\/(www\\.)?instagram\\.com\\/(p|reel|tv|stories)\\/[a-zA-Z0-9_-]+\\/?(\\?.*)?$/i;\n        if (!instagramRegex.test(url)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid Instagram URL. Please provide a valid Instagram post, reel, or story URL.\"\n            }, {\n                status: 400\n            });\n        }\n        // Sanitize URL to prevent injection\n        const sanitizedUrl = encodeURIComponent(url);\n        const rapidApiKey1 = process.env.RAPIDAPI_KEY1;\n        const rapidApiKey2 = process.env.RAPIDAPI_KEY2;\n        if (!rapidApiKey1 || !rapidApiKey2) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"API keys not configured\"\n            }, {\n                status: 500\n            });\n        }\n        // Try API 1 first: Instagram Downloader V2 API\n        try {\n            const response = await fetch(`https://instagram-downloader-v2-scraper-reels-igtv-posts-stories.p.rapidapi.com/get-post?url=${sanitizedUrl}`, {\n                method: \"GET\",\n                headers: {\n                    \"x-rapidapi-key\": rapidApiKey1,\n                    \"x-rapidapi-host\": \"instagram-downloader-v2-scraper-reels-igtv-posts-stories.p.rapidapi.com\"\n                }\n            });\n            if (response.ok) {\n                const data = await response.json();\n                // Track successful API 1 call\n                (0,_lib_usage_tracker__WEBPACK_IMPORTED_MODULE_1__.trackApiCall)(\"instagram-downloader-v2-scraper-reels-igtv-posts-stories.p.rapidapi.com\", true);\n                // Parse API 1 response structure\n                if (data && data.media && Array.isArray(data.media) && data.media.length > 0) {\n                    const firstMedia = data.media[0];\n                    const isCarousel = data.media.length > 1;\n                    // Map media array to standard format\n                    const mediaUrls = data.media.map((item)=>({\n                            type: item.is_video ? \"video\" : \"image\",\n                            url: item.url,\n                            thumbnail: item.is_video ? item.thumb : item.url // thumb is JPG for videos, url for images\n                        }));\n                    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                        success: true,\n                        api: \"instagram-downloader-v2-scraper-reels-igtv-posts-stories.p.rapidapi.com\",\n                        data: {\n                            thumbnail: firstMedia.is_video ? firstMedia.thumb : firstMedia.url,\n                            title: firstMedia.caption || \"Instagram Media\",\n                            author: data.owner?.username ? \"@\" + data.owner.username : \"@instagram\",\n                            downloadUrl: firstMedia.url || \"#\",\n                            type: firstMedia.is_video ? \"video\" : \"image\",\n                            quality: \"HD\",\n                            caption: firstMedia.caption || \"\",\n                            username: data.owner?.username ? \"@\" + data.owner.username : \"@instagram\",\n                            mediaUrls: mediaUrls,\n                            isCarousel: isCarousel,\n                            mediaCount: data.media.length,\n                            likes: firstMedia.like_count,\n                            comments: firstMedia.comment_count\n                        }\n                    });\n                }\n            }\n        } catch (error) {\n            console.log(\"API 1 failed, trying API 2...\", error);\n            // Track failed API 1 call\n            (0,_lib_usage_tracker__WEBPACK_IMPORTED_MODULE_1__.trackApiCall)(\"instagram-downloader-v2-scraper-reels-igtv-posts-stories.p.rapidapi.com\", false);\n        }\n        // Try API 2: Instagram Downloader (Stories/Videos)\n        try {\n            const response = await fetch(`https://instagram-downloader-download-instagram-stories-videos4.p.rapidapi.com/convert?url=${sanitizedUrl}`, {\n                method: \"GET\",\n                headers: {\n                    \"x-rapidapi-key\": rapidApiKey2,\n                    \"x-rapidapi-host\": \"instagram-downloader-download-instagram-stories-videos4.p.rapidapi.com\"\n                }\n            });\n            if (response.ok) {\n                const data = await response.json();\n                // Track successful API 2 call\n                (0,_lib_usage_tracker__WEBPACK_IMPORTED_MODULE_1__.trackApiCall)(\"instagram-downloader-download-instagram-stories-videos4.p.rapidapi.com\", true);\n                // Parse API 2 response structure\n                if (data && data.url) {\n                    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                        success: true,\n                        api: \"instagram-downloader-download-instagram-stories-videos4.p.rapidapi.com\",\n                        data: {\n                            thumbnail: data.thumbnail || data.url || \"https://picsum.photos/600/800\",\n                            title: data.title || \"Instagram Media\",\n                            author: data.author || \"@instagram\",\n                            downloadUrl: data.url || \"#\",\n                            type: data.type || \"video\",\n                            quality: data.quality || \"HD\",\n                            caption: data.caption || \"\",\n                            username: data.author || \"@instagram\",\n                            mediaUrls: [\n                                {\n                                    type: data.type || \"video\",\n                                    url: data.url,\n                                    thumbnail: data.thumbnail || data.url\n                                }\n                            ],\n                            isCarousel: false,\n                            mediaCount: 1\n                        }\n                    });\n                }\n            }\n        } catch (error) {\n            console.log(\"API 2 also failed\", error);\n            // Track failed API 2 call\n            (0,_lib_usage_tracker__WEBPACK_IMPORTED_MODULE_1__.trackApiCall)(\"instagram-downloader-download-instagram-stories-videos4.p.rapidapi.com\", false);\n        }\n        // Both APIs failed\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to fetch Instagram media. The post might be private or deleted.\"\n        }, {\n            status: 404\n        });\n    } catch (error) {\n        console.error(\"API Error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Internal server error. Please try again later.\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O29DQUNWRyxNQUFNVixLQUFLVSxJQUFJLElBQUk7b0NBQ25CN0IsS0FBS21CLEtBQUtuQixHQUFHO29DQUNiK0IsV0FBV1osS0FBS1ksU0FBUyxJQUFJWixLQUFLbkIsR0FBRztnQ0FDdkM7NkJBQUU7NEJBQ0Z5QixZQUFZOzRCQUNaaUIsWUFBWTt3QkFDZDtvQkFDRjtnQkFDRjtZQUNGO1FBQ0YsRUFBRSxPQUFPeEMsT0FBTztZQUNkNkMsUUFBUUMsR0FBRyxDQUFDLHFCQUFxQjlDO1lBQ2pDLDBCQUEwQjtZQUMxQkwsZ0VBQVlBLENBQUMsMEVBQTBFO1FBQ3pGO1FBRUEsbUJBQW1CO1FBQ25CLE9BQU9ELGtGQUFZQSxDQUFDSyxJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBeUUsR0FDbEY7WUFBRUMsUUFBUTtRQUFJO0lBR2xCLEVBQUUsT0FBT0QsT0FBTztRQUNkNkMsUUFBUTdDLEtBQUssQ0FBQyxjQUFjQTtRQUM1QixPQUFPTixrRkFBWUEsQ0FBQ0ssSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQWlELEdBQzFEO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5zdGEtb3JiaXQtZG93bmxvYWRlci8uL3NyYy9hcHAvYXBpL2Rvd25sb2FkL3JvdXRlLnRzP2JjMzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgdHJhY2tBcGlDYWxsIH0gZnJvbSAnQC9saWIvdXNhZ2UtdHJhY2tlcic7XHJcblxyXG4vLyBJbnN0YWdyYW0gRG93bmxvYWQgQVBJIHVzaW5nIFJhcGlkQVBJXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgdXJsIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBVUkxcclxuICAgIGlmICghdXJsIHx8IHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnVVJMIGlzIHJlcXVpcmVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIEluc3RhZ3JhbSBVUkwgZm9ybWF0XHJcbiAgICBjb25zdCBpbnN0YWdyYW1SZWdleCA9IC9eaHR0cHM/OlxcL1xcLyh3d3dcXC4pP2luc3RhZ3JhbVxcLmNvbVxcLyhwfHJlZWx8dHZ8c3RvcmllcylcXC9bYS16QS1aMC05Xy1dK1xcLz8oXFw/LiopPyQvaTtcclxuICAgIGlmICghaW5zdGFncmFtUmVnZXgudGVzdCh1cmwpKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnSW52YWxpZCBJbnN0YWdyYW0gVVJMLiBQbGVhc2UgcHJvdmlkZSBhIHZhbGlkIEluc3RhZ3JhbSBwb3N0LCByZWVsLCBvciBzdG9yeSBVUkwuJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNhbml0aXplIFVSTCB0byBwcmV2ZW50IGluamVjdGlvblxyXG4gICAgY29uc3Qgc2FuaXRpemVkVXJsID0gZW5jb2RlVVJJQ29tcG9uZW50KHVybCk7XHJcbiAgICBjb25zdCByYXBpZEFwaUtleTEgPSBwcm9jZXNzLmVudi5SQVBJREFQSV9LRVkxO1xyXG4gICAgY29uc3QgcmFwaWRBcGlLZXkyID0gcHJvY2Vzcy5lbnYuUkFQSURBUElfS0VZMjtcclxuXHJcbiAgICBpZiAoIXJhcGlkQXBpS2V5MSB8fCAhcmFwaWRBcGlLZXkyKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnQVBJIGtleXMgbm90IGNvbmZpZ3VyZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVHJ5IEFQSSAxIGZpcnN0OiBJbnN0YWdyYW0gRG93bmxvYWRlciBWMiBBUElcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgICAgYGh0dHBzOi8vaW5zdGFncmFtLWRvd25sb2FkZXItdjItc2NyYXBlci1yZWVscy1pZ3R2LXBvc3RzLXN0b3JpZXMucC5yYXBpZGFwaS5jb20vZ2V0LXBvc3Q/dXJsPSR7c2FuaXRpemVkVXJsfWAsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ3gtcmFwaWRhcGkta2V5JzogcmFwaWRBcGlLZXkxLFxyXG4gICAgICAgICAgICAneC1yYXBpZGFwaS1ob3N0JzogJ2luc3RhZ3JhbS1kb3dubG9hZGVyLXYyLXNjcmFwZXItcmVlbHMtaWd0di1wb3N0cy1zdG9yaWVzLnAucmFwaWRhcGkuY29tJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gVHJhY2sgc3VjY2Vzc2Z1bCBBUEkgMSBjYWxsXHJcbiAgICAgICAgdHJhY2tBcGlDYWxsKCdpbnN0YWdyYW0tZG93bmxvYWRlci12Mi1zY3JhcGVyLXJlZWxzLWlndHYtcG9zdHMtc3Rvcmllcy5wLnJhcGlkYXBpLmNvbScsIHRydWUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFBhcnNlIEFQSSAxIHJlc3BvbnNlIHN0cnVjdHVyZVxyXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEubWVkaWEgJiYgQXJyYXkuaXNBcnJheShkYXRhLm1lZGlhKSAmJiBkYXRhLm1lZGlhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGNvbnN0IGZpcnN0TWVkaWEgPSBkYXRhLm1lZGlhWzBdO1xyXG4gICAgICAgICAgY29uc3QgaXNDYXJvdXNlbCA9IGRhdGEubWVkaWEubGVuZ3RoID4gMTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gTWFwIG1lZGlhIGFycmF5IHRvIHN0YW5kYXJkIGZvcm1hdFxyXG4gICAgICAgICAgY29uc3QgbWVkaWFVcmxzID0gZGF0YS5tZWRpYS5tYXAoKGl0ZW06IGFueSkgPT4gKHtcclxuICAgICAgICAgICAgdHlwZTogaXRlbS5pc192aWRlbyA/ICd2aWRlbycgOiAnaW1hZ2UnLFxyXG4gICAgICAgICAgICB1cmw6IGl0ZW0udXJsLFxyXG4gICAgICAgICAgICB0aHVtYm5haWw6IGl0ZW0uaXNfdmlkZW8gPyBpdGVtLnRodW1iIDogaXRlbS51cmwgLy8gdGh1bWIgaXMgSlBHIGZvciB2aWRlb3MsIHVybCBmb3IgaW1hZ2VzXHJcbiAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIGFwaTogJ2luc3RhZ3JhbS1kb3dubG9hZGVyLXYyLXNjcmFwZXItcmVlbHMtaWd0di1wb3N0cy1zdG9yaWVzLnAucmFwaWRhcGkuY29tJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgIHRodW1ibmFpbDogZmlyc3RNZWRpYS5pc192aWRlbyA/IGZpcnN0TWVkaWEudGh1bWIgOiBmaXJzdE1lZGlhLnVybCwgLy8gdGh1bWIgKEpQRykgZm9yIHZpZGVvcywgdXJsIGZvciBpbWFnZXNcclxuICAgICAgICAgICAgICB0aXRsZTogZmlyc3RNZWRpYS5jYXB0aW9uIHx8ICdJbnN0YWdyYW0gTWVkaWEnLFxyXG4gICAgICAgICAgICAgIGF1dGhvcjogZGF0YS5vd25lcj8udXNlcm5hbWUgPyAnQCcgKyBkYXRhLm93bmVyLnVzZXJuYW1lIDogJ0BpbnN0YWdyYW0nLFxyXG4gICAgICAgICAgICAgIGRvd25sb2FkVXJsOiBmaXJzdE1lZGlhLnVybCB8fCAnIycsXHJcbiAgICAgICAgICAgICAgdHlwZTogZmlyc3RNZWRpYS5pc192aWRlbyA/ICd2aWRlbycgOiAnaW1hZ2UnLFxyXG4gICAgICAgICAgICAgIHF1YWxpdHk6ICdIRCcsXHJcbiAgICAgICAgICAgICAgY2FwdGlvbjogZmlyc3RNZWRpYS5jYXB0aW9uIHx8ICcnLFxyXG4gICAgICAgICAgICAgIHVzZXJuYW1lOiBkYXRhLm93bmVyPy51c2VybmFtZSA/ICdAJyArIGRhdGEub3duZXIudXNlcm5hbWUgOiAnQGluc3RhZ3JhbScsXHJcbiAgICAgICAgICAgICAgbWVkaWFVcmxzOiBtZWRpYVVybHMsXHJcbiAgICAgICAgICAgICAgaXNDYXJvdXNlbDogaXNDYXJvdXNlbCxcclxuICAgICAgICAgICAgICBtZWRpYUNvdW50OiBkYXRhLm1lZGlhLmxlbmd0aCxcclxuICAgICAgICAgICAgICBsaWtlczogZmlyc3RNZWRpYS5saWtlX2NvdW50LFxyXG4gICAgICAgICAgICAgIGNvbW1lbnRzOiBmaXJzdE1lZGlhLmNvbW1lbnRfY291bnRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmxvZygnQVBJIDEgZmFpbGVkLCB0cnlpbmcgQVBJIDIuLi4nLCBlcnJvcik7XHJcbiAgICAgIC8vIFRyYWNrIGZhaWxlZCBBUEkgMSBjYWxsXHJcbiAgICAgIHRyYWNrQXBpQ2FsbCgnaW5zdGFncmFtLWRvd25sb2FkZXItdjItc2NyYXBlci1yZWVscy1pZ3R2LXBvc3RzLXN0b3JpZXMucC5yYXBpZGFwaS5jb20nLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVHJ5IEFQSSAyOiBJbnN0YWdyYW0gRG93bmxvYWRlciAoU3Rvcmllcy9WaWRlb3MpXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxyXG4gICAgICAgIGBodHRwczovL2luc3RhZ3JhbS1kb3dubG9hZGVyLWRvd25sb2FkLWluc3RhZ3JhbS1zdG9yaWVzLXZpZGVvczQucC5yYXBpZGFwaS5jb20vY29udmVydD91cmw9JHtzYW5pdGl6ZWRVcmx9YCxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAneC1yYXBpZGFwaS1rZXknOiByYXBpZEFwaUtleTIsXHJcbiAgICAgICAgICAgICd4LXJhcGlkYXBpLWhvc3QnOiAnaW5zdGFncmFtLWRvd25sb2FkZXItZG93bmxvYWQtaW5zdGFncmFtLXN0b3JpZXMtdmlkZW9zNC5wLnJhcGlkYXBpLmNvbSdcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRyYWNrIHN1Y2Nlc3NmdWwgQVBJIDIgY2FsbFxyXG4gICAgICAgIHRyYWNrQXBpQ2FsbCgnaW5zdGFncmFtLWRvd25sb2FkZXItZG93bmxvYWQtaW5zdGFncmFtLXN0b3JpZXMtdmlkZW9zNC5wLnJhcGlkYXBpLmNvbScsIHRydWUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFBhcnNlIEFQSSAyIHJlc3BvbnNlIHN0cnVjdHVyZVxyXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEudXJsKSB7XHJcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICBhcGk6ICdpbnN0YWdyYW0tZG93bmxvYWRlci1kb3dubG9hZC1pbnN0YWdyYW0tc3Rvcmllcy12aWRlb3M0LnAucmFwaWRhcGkuY29tJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgIHRodW1ibmFpbDogZGF0YS50aHVtYm5haWwgfHwgZGF0YS51cmwgfHwgJ2h0dHBzOi8vcGljc3VtLnBob3Rvcy82MDAvODAwJyxcclxuICAgICAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSB8fCAnSW5zdGFncmFtIE1lZGlhJyxcclxuICAgICAgICAgICAgICBhdXRob3I6IGRhdGEuYXV0aG9yIHx8ICdAaW5zdGFncmFtJyxcclxuICAgICAgICAgICAgICBkb3dubG9hZFVybDogZGF0YS51cmwgfHwgJyMnLFxyXG4gICAgICAgICAgICAgIHR5cGU6IGRhdGEudHlwZSB8fCAndmlkZW8nLFxyXG4gICAgICAgICAgICAgIHF1YWxpdHk6IGRhdGEucXVhbGl0eSB8fCAnSEQnLFxyXG4gICAgICAgICAgICAgIGNhcHRpb246IGRhdGEuY2FwdGlvbiB8fCAnJyxcclxuICAgICAgICAgICAgICB1c2VybmFtZTogZGF0YS5hdXRob3IgfHwgJ0BpbnN0YWdyYW0nLFxyXG4gICAgICAgICAgICAgIG1lZGlhVXJsczogW3tcclxuICAgICAgICAgICAgICAgIHR5cGU6IGRhdGEudHlwZSB8fCAndmlkZW8nLFxyXG4gICAgICAgICAgICAgICAgdXJsOiBkYXRhLnVybCxcclxuICAgICAgICAgICAgICAgIHRodW1ibmFpbDogZGF0YS50aHVtYm5haWwgfHwgZGF0YS51cmxcclxuICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICBpc0Nhcm91c2VsOiBmYWxzZSxcclxuICAgICAgICAgICAgICBtZWRpYUNvdW50OiAxXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5sb2coJ0FQSSAyIGFsc28gZmFpbGVkJywgZXJyb3IpO1xyXG4gICAgICAvLyBUcmFjayBmYWlsZWQgQVBJIDIgY2FsbFxyXG4gICAgICB0cmFja0FwaUNhbGwoJ2luc3RhZ3JhbS1kb3dubG9hZGVyLWRvd25sb2FkLWluc3RhZ3JhbS1zdG9yaWVzLXZpZGVvczQucC5yYXBpZGFwaS5jb20nLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQm90aCBBUElzIGZhaWxlZFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIEluc3RhZ3JhbSBtZWRpYS4gVGhlIHBvc3QgbWlnaHQgYmUgcHJpdmF0ZSBvciBkZWxldGVkLicgfSxcclxuICAgICAgeyBzdGF0dXM6IDQwNCB9XHJcbiAgICApO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignQVBJIEVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvci4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInRyYWNrQXBpQ2FsbCIsIlBPU1QiLCJyZXF1ZXN0IiwidXJsIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiaW5zdGFncmFtUmVnZXgiLCJ0ZXN0Iiwic2FuaXRpemVkVXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmFwaWRBcGlLZXkxIiwicHJvY2VzcyIsImVudiIsIlJBUElEQVBJX0tFWTEiLCJyYXBpZEFwaUtleTIiLCJSQVBJREFQSV9LRVkyIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJvayIsImRhdGEiLCJtZWRpYSIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsImZpcnN0TWVkaWEiLCJpc0Nhcm91c2VsIiwibWVkaWFVcmxzIiwibWFwIiwiaXRlbSIsInR5cGUiLCJpc192aWRlbyIsInRodW1ibmFpbCIsInRodW1iIiwic3VjY2VzcyIsImFwaSIsInRpdGxlIiwiY2FwdGlvbiIsImF1dGhvciIsIm93bmVyIiwidXNlcm5hbWUiLCJkb3dubG9hZFVybCIsInF1YWxpdHkiLCJtZWRpYUNvdW50IiwibGlrZXMiLCJsaWtlX2NvdW50IiwiY29tbWVudHMiLCJjb21tZW50X2NvdW50IiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/download/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/mongodb.ts":
/*!****************************!*\
  !*** ./src/lib/mongodb.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"Please define MONGODB_URI environment variable in .env.local\");\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\ncached = global.mongoose;\nconst dbConnect = async ()=>{\n    // Return cached connection if available (improves performance for SSR)\n    if (cached.conn) {\n        console.log(\"Using cached MongoDB connection\");\n        return cached.conn;\n    }\n    // Create new connection promise if not exists\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false,\n            dbName: \"instaorbit\",\n            maxPoolSize: 10,\n            serverSelectionTimeoutMS: 5000,\n            socketTimeoutMS: 45000\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((result)=>{\n            console.log(\"✅ Connected to MongoDB successfully\");\n            return result;\n        }).catch((error)=>{\n            console.error(\"❌ Error connecting to MongoDB:\", error);\n            // Reset promise on error so next call will retry\n            cached.promise = null;\n            throw error;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL21vbmdvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThDO0FBRTlDLE1BQU1DLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0YsV0FBVztBQUUzQyxJQUFJLENBQUNBLGFBQWE7SUFDaEIsTUFBTSxJQUFJRyxNQUFNO0FBQ2xCO0FBYUEsSUFBSUMsU0FBU0MsT0FBT04sUUFBUTtBQUU1QixJQUFJLENBQUNLLFFBQVE7SUFDWEEsU0FBU0MsT0FBT04sUUFBUSxHQUFHO1FBQUVPLE1BQU07UUFBTUMsU0FBUztJQUFLO0FBQ3pEO0FBRUFILFNBQVNDLE9BQU9OLFFBQVE7QUFFeEIsTUFBTVMsWUFBWTtJQUNoQix1RUFBdUU7SUFDdkUsSUFBSUosT0FBT0UsSUFBSSxFQUFFO1FBQ2ZHLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE9BQU9OLE9BQU9FLElBQUk7SUFDcEI7SUFFQSw4Q0FBOEM7SUFDOUMsSUFBSSxDQUFDRixPQUFPRyxPQUFPLEVBQUU7UUFDbkIsTUFBTUksT0FBTztZQUNYQyxnQkFBZ0I7WUFDaEJDLFFBQVE7WUFDUkMsYUFBYTtZQUNiQywwQkFBMEI7WUFDMUJDLGlCQUFpQjtRQUNuQjtRQUVBWixPQUFPRyxPQUFPLEdBQUdSLHVEQUNQLENBQUNDLGFBQWFXLE1BQ3JCTyxJQUFJLENBQUMsQ0FBQ0M7WUFDTFYsUUFBUUMsR0FBRyxDQUFDO1lBQ1osT0FBT1M7UUFDVCxHQUNDQyxLQUFLLENBQUMsQ0FBQ0M7WUFDTlosUUFBUVksS0FBSyxDQUFDLGtDQUFrQ0E7WUFDaEQsaURBQWlEO1lBQ2pEakIsT0FBT0csT0FBTyxHQUFHO1lBQ2pCLE1BQU1jO1FBQ1I7SUFDSjtJQUVBLElBQUk7UUFDRmpCLE9BQU9FLElBQUksR0FBRyxNQUFNRixPQUFPRyxPQUFPO0lBQ3BDLEVBQUUsT0FBT2UsR0FBRztRQUNWbEIsT0FBT0csT0FBTyxHQUFHO1FBQ2pCLE1BQU1lO0lBQ1I7SUFFQSxPQUFPbEIsT0FBT0UsSUFBSTtBQUNwQjtBQUVBLGlFQUFlRSxTQUFTQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5zdGEtb3JiaXQtZG93bmxvYWRlci8uL3NyYy9saWIvbW9uZ29kYi50cz81M2MyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBNb25nb29zZSB9IGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IE1PTkdPREJfVVJJID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkk7XHJcblxyXG5pZiAoIU1PTkdPREJfVVJJKSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgZGVmaW5lIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlIGluIC5lbnYubG9jYWwnKTtcclxufVxyXG5cclxuaW50ZXJmYWNlIE1vbmdvb3NlQ2FjaGUge1xyXG4gIGNvbm46IE1vbmdvb3NlIHwgbnVsbDtcclxuICBwcm9taXNlOiBQcm9taXNlPE1vbmdvb3NlPiB8IG51bGw7XHJcbn1cclxuXHJcbi8vIEF1Z21lbnQgZ2xvYmFsIHR5cGUgZm9yIFR5cGVTY3JpcHRcclxuZGVjbGFyZSBnbG9iYWwge1xyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby12YXJcclxuICB2YXIgbW9uZ29vc2U6IE1vbmdvb3NlQ2FjaGUgfCB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmxldCBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2U7XHJcblxyXG5pZiAoIWNhY2hlZCkge1xyXG4gIGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZSA9IHsgY29ubjogbnVsbCwgcHJvbWlzZTogbnVsbCB9O1xyXG59XHJcblxyXG5jYWNoZWQgPSBnbG9iYWwubW9uZ29vc2UgYXMgTW9uZ29vc2VDYWNoZTtcclxuXHJcbmNvbnN0IGRiQ29ubmVjdCA9IGFzeW5jICgpOiBQcm9taXNlPE1vbmdvb3NlPiA9PiB7XHJcbiAgLy8gUmV0dXJuIGNhY2hlZCBjb25uZWN0aW9uIGlmIGF2YWlsYWJsZSAoaW1wcm92ZXMgcGVyZm9ybWFuY2UgZm9yIFNTUilcclxuICBpZiAoY2FjaGVkLmNvbm4pIHtcclxuICAgIGNvbnNvbGUubG9nKCdVc2luZyBjYWNoZWQgTW9uZ29EQiBjb25uZWN0aW9uJyk7XHJcbiAgICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbiAgfVxyXG5cclxuICAvLyBDcmVhdGUgbmV3IGNvbm5lY3Rpb24gcHJvbWlzZSBpZiBub3QgZXhpc3RzXHJcbiAgaWYgKCFjYWNoZWQucHJvbWlzZSkge1xyXG4gICAgY29uc3Qgb3B0cyA9IHtcclxuICAgICAgYnVmZmVyQ29tbWFuZHM6IGZhbHNlLCAvLyBEaXNhYmxlIGJ1ZmZlcmluZyBmb3IgYmV0dGVyIFNTUiBwZXJmb3JtYW5jZVxyXG4gICAgICBkYk5hbWU6ICdpbnN0YW9yYml0JyxcclxuICAgICAgbWF4UG9vbFNpemU6IDEwLCAvLyBDb25uZWN0aW9uIHBvb2wgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxyXG4gICAgICBzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVM6IDUwMDAsIC8vIFRpbWVvdXQgYWZ0ZXIgNXMgaW5zdGVhZCBvZiAzMHNcclxuICAgICAgc29ja2V0VGltZW91dE1TOiA0NTAwMCwgLy8gQ2xvc2Ugc29ja2V0cyBhZnRlciA0NXMgb2YgaW5hY3Rpdml0eVxyXG4gICAgfTtcclxuXHJcbiAgICBjYWNoZWQucHJvbWlzZSA9IG1vbmdvb3NlXHJcbiAgICAgIC5jb25uZWN0KE1PTkdPREJfVVJJLCBvcHRzKVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBDb25uZWN0ZWQgdG8gTW9uZ29EQiBzdWNjZXNzZnVsbHknKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGNvbm5lY3RpbmcgdG8gTW9uZ29EQjonLCBlcnJvcik7XHJcbiAgICAgICAgLy8gUmVzZXQgcHJvbWlzZSBvbiBlcnJvciBzbyBuZXh0IGNhbGwgd2lsbCByZXRyeVxyXG4gICAgICAgIGNhY2hlZC5wcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjYWNoZWQucHJvbWlzZSA9IG51bGw7XHJcbiAgICB0aHJvdyBlO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNhY2hlZC5jb25uO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZGJDb25uZWN0O1xyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsImNhY2hlZCIsImdsb2JhbCIsImNvbm4iLCJwcm9taXNlIiwiZGJDb25uZWN0IiwiY29uc29sZSIsImxvZyIsIm9wdHMiLCJidWZmZXJDb21tYW5kcyIsImRiTmFtZSIsIm1heFBvb2xTaXplIiwic2VydmVyU2VsZWN0aW9uVGltZW91dE1TIiwic29ja2V0VGltZW91dE1TIiwiY29ubmVjdCIsInRoZW4iLCJyZXN1bHQiLCJjYXRjaCIsImVycm9yIiwiZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/mongodb.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/usage-tracker.ts":
/*!**********************************!*\
  !*** ./src/lib/usage-tracker.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getApiStats: () => (/* binding */ getApiStats),\n/* harmony export */   getUsageData: () => (/* binding */ getUsageData),\n/* harmony export */   resetUsageData: () => (/* binding */ resetUsageData),\n/* harmony export */   trackApiCall: () => (/* binding */ trackApiCall)\n/* harmony export */ });\n/* harmony import */ var _mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mongodb */ \"(rsc)/./src/lib/mongodb.ts\");\n/* harmony import */ var _models_ApiUsage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/models/ApiUsage */ \"(rsc)/./src/models/ApiUsage.ts\");\n\n\n// Get usage data from MongoDB\nasync function getUsageData() {\n    try {\n        await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const api1Data = await _models_ApiUsage__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOne({\n            apiHost: \"instagram-downloader-v2-scraper-reels-igtv-posts-stories.p.rapidapi.com\"\n        });\n        const api2Data = await _models_ApiUsage__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOne({\n            apiHost: \"instagram-downloader-download-instagram-stories-videos4.p.rapidapi.com\"\n        });\n        const defaultApiUsage = {\n            totalCalls: 0,\n            successCalls: 0,\n            failedCalls: 0,\n            lastCallAt: null,\n            dailyStats: {}\n        };\n        const api1 = api1Data ? {\n            totalCalls: api1Data.totalCalls,\n            successCalls: api1Data.successCalls,\n            failedCalls: api1Data.failedCalls,\n            lastCallAt: api1Data.lastCallAt ? api1Data.lastCallAt.toISOString() : null,\n            dailyStats: Object.fromEntries(api1Data.dailyStats || new Map())\n        } : defaultApiUsage;\n        const api2 = api2Data ? {\n            totalCalls: api2Data.totalCalls,\n            successCalls: api2Data.successCalls,\n            failedCalls: api2Data.failedCalls,\n            lastCallAt: api2Data.lastCallAt ? api2Data.lastCallAt.toISOString() : null,\n            dailyStats: Object.fromEntries(api2Data.dailyStats || new Map())\n        } : defaultApiUsage;\n        return {\n            \"instagram-downloader-v2-scraper-reels-igtv-posts-stories.p.rapidapi.com\": api1,\n            \"instagram-downloader-download-instagram-stories-videos4.p.rapidapi.com\": api2,\n            totalApiCalls: api1.totalCalls + api2.totalCalls,\n            createdAt: new Date().toISOString()\n        };\n    } catch (error) {\n        console.error(\"❌ Error reading usage from MongoDB:\", error);\n        return {\n            \"instagram-downloader-v2-scraper-reels-igtv-posts-stories.p.rapidapi.com\": {\n                totalCalls: 0,\n                successCalls: 0,\n                failedCalls: 0,\n                lastCallAt: null,\n                dailyStats: {}\n            },\n            \"instagram-downloader-download-instagram-stories-videos4.p.rapidapi.com\": {\n                totalCalls: 0,\n                successCalls: 0,\n                failedCalls: 0,\n                lastCallAt: null,\n                dailyStats: {}\n            },\n            totalApiCalls: 0,\n            createdAt: new Date().toISOString()\n        };\n    }\n}\n// Track API call in MongoDB (fire-and-forget for better performance)\nasync function trackApiCall(apiHost, success) {\n    // Don't await - fire and forget to not slow down API responses\n    setImmediate(async ()=>{\n        try {\n            await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n            const today = new Date().toISOString().split(\"T\")[0]; // YYYY-MM-DD\n            // Use findOneAndUpdate for atomic operation (better for concurrent requests)\n            await _models_ApiUsage__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOneAndUpdate({\n                apiHost\n            }, {\n                $inc: {\n                    totalCalls: 1,\n                    successCalls: success ? 1 : 0,\n                    failedCalls: success ? 0 : 1,\n                    [`dailyStats.${today}`]: 1\n                },\n                $set: {\n                    lastCallAt: new Date()\n                }\n            }, {\n                upsert: true,\n                new: true,\n                setDefaultsOnInsert: true\n            });\n        } catch (error) {\n            console.error(\"❌ Error tracking API call in MongoDB:\", error);\n        }\n    });\n}\n// Reset usage data in MongoDB\nasync function resetUsageData() {\n    try {\n        await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        await _models_ApiUsage__WEBPACK_IMPORTED_MODULE_1__[\"default\"].deleteMany({});\n        console.log(\"✅ Usage data reset successfully\");\n    } catch (error) {\n        console.error(\"❌ Error resetting usage in MongoDB:\", error);\n        throw error;\n    }\n}\n// Get usage stats for a specific API\nasync function getApiStats(apiHost) {\n    try {\n        await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const usage = await _models_ApiUsage__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOne({\n            apiHost\n        });\n        if (!usage) {\n            return {\n                totalCalls: 0,\n                successCalls: 0,\n                failedCalls: 0,\n                lastCallAt: null,\n                dailyStats: {}\n            };\n        }\n        return {\n            totalCalls: usage.totalCalls,\n            successCalls: usage.successCalls,\n            failedCalls: usage.failedCalls,\n            lastCallAt: usage.lastCallAt ? usage.lastCallAt.toISOString() : null,\n            dailyStats: Object.fromEntries(usage.dailyStats || new Map())\n        };\n    } catch (error) {\n        console.error(\"❌ Error getting API stats from MongoDB:\", error);\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxDQUFDO1FBQzNCYixRQUFRYyxHQUFHLENBQUM7SUFDZCxFQUFFLE9BQU9mLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHVDQUF1Q0E7UUFDckQsTUFBTUE7SUFDUjtBQUNGO0FBRUEscUNBQXFDO0FBQzlCLGVBQWVnQixZQUFZakMsT0FBZTtJQUMvQyxJQUFJO1FBQ0YsTUFBTUwsb0RBQVNBO1FBQ2YsTUFBTXVDLFFBQVEsTUFBTXRDLHdEQUFRQSxDQUFDRyxPQUFPLENBQUM7WUFBRUM7UUFBUTtRQUUvQyxJQUFJLENBQUNrQyxPQUFPO1lBQ1YsT0FBTztnQkFDTC9CLFlBQVk7Z0JBQ1pDLGNBQWM7Z0JBQ2RDLGFBQWE7Z0JBQ2JDLFlBQVk7Z0JBQ1pDLFlBQVksQ0FBQztZQUNmO1FBQ0Y7UUFFQSxPQUFPO1lBQ0xKLFlBQVkrQixNQUFNL0IsVUFBVTtZQUM1QkMsY0FBYzhCLE1BQU05QixZQUFZO1lBQ2hDQyxhQUFhNkIsTUFBTTdCLFdBQVc7WUFDOUJDLFlBQVk0QixNQUFNNUIsVUFBVSxHQUFHNEIsTUFBTTVCLFVBQVUsQ0FBQ0csV0FBVyxLQUFLO1lBQ2hFRixZQUFZRyxPQUFPQyxXQUFXLENBQUN1QixNQUFNM0IsVUFBVSxJQUFJLElBQUlLO1FBQ3pEO0lBQ0YsRUFBRSxPQUFPSyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywyQ0FBMkNBO1FBQ3pELE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5zdGEtb3JiaXQtZG93bmxvYWRlci8uL3NyYy9saWIvdXNhZ2UtdHJhY2tlci50cz9hYjQwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb25uZWN0REIgZnJvbSAnLi9tb25nb2RiJztcclxuaW1wb3J0IEFwaVVzYWdlIGZyb20gJ0AvbW9kZWxzL0FwaVVzYWdlJztcclxuXHJcbmludGVyZmFjZSBBcGlVc2FnZURhdGEge1xyXG4gIHRvdGFsQ2FsbHM6IG51bWJlcjtcclxuICBzdWNjZXNzQ2FsbHM6IG51bWJlcjtcclxuICBmYWlsZWRDYWxsczogbnVtYmVyO1xyXG4gIGxhc3RDYWxsQXQ6IHN0cmluZyB8IG51bGw7XHJcbiAgZGFpbHlTdGF0czogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFVzYWdlRGF0YSB7XHJcbiAgJ2luc3RhZ3JhbS1kb3dubG9hZGVyLXYyLXNjcmFwZXItcmVlbHMtaWd0di1wb3N0cy1zdG9yaWVzLnAucmFwaWRhcGkuY29tJzogQXBpVXNhZ2VEYXRhO1xyXG4gICdpbnN0YWdyYW0tZG93bmxvYWRlci1kb3dubG9hZC1pbnN0YWdyYW0tc3Rvcmllcy12aWRlb3M0LnAucmFwaWRhcGkuY29tJzogQXBpVXNhZ2VEYXRhO1xyXG4gIHRvdGFsQXBpQ2FsbHM6IG51bWJlcjtcclxuICBjcmVhdGVkQXQ6IHN0cmluZztcclxufVxyXG5cclxuLy8gR2V0IHVzYWdlIGRhdGEgZnJvbSBNb25nb0RCXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2FnZURhdGEoKTogUHJvbWlzZTxVc2FnZURhdGE+IHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgY29ubmVjdERCKCk7XHJcblxyXG4gICAgY29uc3QgYXBpMURhdGEgPSBhd2FpdCBBcGlVc2FnZS5maW5kT25lKHsgXHJcbiAgICAgIGFwaUhvc3Q6ICdpbnN0YWdyYW0tZG93bmxvYWRlci12Mi1zY3JhcGVyLXJlZWxzLWlndHYtcG9zdHMtc3Rvcmllcy5wLnJhcGlkYXBpLmNvbScgXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGFwaTJEYXRhID0gYXdhaXQgQXBpVXNhZ2UuZmluZE9uZSh7IFxyXG4gICAgICBhcGlIb3N0OiAnaW5zdGFncmFtLWRvd25sb2FkZXItZG93bmxvYWQtaW5zdGFncmFtLXN0b3JpZXMtdmlkZW9zNC5wLnJhcGlkYXBpLmNvbScgXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBkZWZhdWx0QXBpVXNhZ2U6IEFwaVVzYWdlRGF0YSA9IHtcclxuICAgICAgdG90YWxDYWxsczogMCxcclxuICAgICAgc3VjY2Vzc0NhbGxzOiAwLFxyXG4gICAgICBmYWlsZWRDYWxsczogMCxcclxuICAgICAgbGFzdENhbGxBdDogbnVsbCxcclxuICAgICAgZGFpbHlTdGF0czoge31cclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgYXBpMSA9IGFwaTFEYXRhID8ge1xyXG4gICAgICB0b3RhbENhbGxzOiBhcGkxRGF0YS50b3RhbENhbGxzLFxyXG4gICAgICBzdWNjZXNzQ2FsbHM6IGFwaTFEYXRhLnN1Y2Nlc3NDYWxscyxcclxuICAgICAgZmFpbGVkQ2FsbHM6IGFwaTFEYXRhLmZhaWxlZENhbGxzLFxyXG4gICAgICBsYXN0Q2FsbEF0OiBhcGkxRGF0YS5sYXN0Q2FsbEF0ID8gYXBpMURhdGEubGFzdENhbGxBdC50b0lTT1N0cmluZygpIDogbnVsbCxcclxuICAgICAgZGFpbHlTdGF0czogT2JqZWN0LmZyb21FbnRyaWVzKGFwaTFEYXRhLmRhaWx5U3RhdHMgfHwgbmV3IE1hcCgpKVxyXG4gICAgfSA6IGRlZmF1bHRBcGlVc2FnZTtcclxuXHJcbiAgICBjb25zdCBhcGkyID0gYXBpMkRhdGEgPyB7XHJcbiAgICAgIHRvdGFsQ2FsbHM6IGFwaTJEYXRhLnRvdGFsQ2FsbHMsXHJcbiAgICAgIHN1Y2Nlc3NDYWxsczogYXBpMkRhdGEuc3VjY2Vzc0NhbGxzLFxyXG4gICAgICBmYWlsZWRDYWxsczogYXBpMkRhdGEuZmFpbGVkQ2FsbHMsXHJcbiAgICAgIGxhc3RDYWxsQXQ6IGFwaTJEYXRhLmxhc3RDYWxsQXQgPyBhcGkyRGF0YS5sYXN0Q2FsbEF0LnRvSVNPU3RyaW5nKCkgOiBudWxsLFxyXG4gICAgICBkYWlseVN0YXRzOiBPYmplY3QuZnJvbUVudHJpZXMoYXBpMkRhdGEuZGFpbHlTdGF0cyB8fCBuZXcgTWFwKCkpXHJcbiAgICB9IDogZGVmYXVsdEFwaVVzYWdlO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICdpbnN0YWdyYW0tZG93bmxvYWRlci12Mi1zY3JhcGVyLXJlZWxzLWlndHYtcG9zdHMtc3Rvcmllcy5wLnJhcGlkYXBpLmNvbSc6IGFwaTEsXHJcbiAgICAgICdpbnN0YWdyYW0tZG93bmxvYWRlci1kb3dubG9hZC1pbnN0YWdyYW0tc3Rvcmllcy12aWRlb3M0LnAucmFwaWRhcGkuY29tJzogYXBpMixcclxuICAgICAgdG90YWxBcGlDYWxsczogYXBpMS50b3RhbENhbGxzICsgYXBpMi50b3RhbENhbGxzLFxyXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIHJlYWRpbmcgdXNhZ2UgZnJvbSBNb25nb0RCOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICdpbnN0YWdyYW0tZG93bmxvYWRlci12Mi1zY3JhcGVyLXJlZWxzLWlndHYtcG9zdHMtc3Rvcmllcy5wLnJhcGlkYXBpLmNvbSc6IHtcclxuICAgICAgICB0b3RhbENhbGxzOiAwLFxyXG4gICAgICAgIHN1Y2Nlc3NDYWxsczogMCxcclxuICAgICAgICBmYWlsZWRDYWxsczogMCxcclxuICAgICAgICBsYXN0Q2FsbEF0OiBudWxsLFxyXG4gICAgICAgIGRhaWx5U3RhdHM6IHt9XHJcbiAgICAgIH0sXHJcbiAgICAgICdpbnN0YWdyYW0tZG93bmxvYWRlci1kb3dubG9hZC1pbnN0YWdyYW0tc3Rvcmllcy12aWRlb3M0LnAucmFwaWRhcGkuY29tJzoge1xyXG4gICAgICAgIHRvdGFsQ2FsbHM6IDAsXHJcbiAgICAgICAgc3VjY2Vzc0NhbGxzOiAwLFxyXG4gICAgICAgIGZhaWxlZENhbGxzOiAwLFxyXG4gICAgICAgIGxhc3RDYWxsQXQ6IG51bGwsXHJcbiAgICAgICAgZGFpbHlTdGF0czoge31cclxuICAgICAgfSxcclxuICAgICAgdG90YWxBcGlDYWxsczogMCxcclxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG4vLyBUcmFjayBBUEkgY2FsbCBpbiBNb25nb0RCIChmaXJlLWFuZC1mb3JnZXQgZm9yIGJldHRlciBwZXJmb3JtYW5jZSlcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRyYWNrQXBpQ2FsbChcclxuICBhcGlIb3N0OiAnaW5zdGFncmFtLWRvd25sb2FkZXItdjItc2NyYXBlci1yZWVscy1pZ3R2LXBvc3RzLXN0b3JpZXMucC5yYXBpZGFwaS5jb20nIHwgJ2luc3RhZ3JhbS1kb3dubG9hZGVyLWRvd25sb2FkLWluc3RhZ3JhbS1zdG9yaWVzLXZpZGVvczQucC5yYXBpZGFwaS5jb20nLFxyXG4gIHN1Y2Nlc3M6IGJvb2xlYW5cclxuKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgLy8gRG9uJ3QgYXdhaXQgLSBmaXJlIGFuZCBmb3JnZXQgdG8gbm90IHNsb3cgZG93biBBUEkgcmVzcG9uc2VzXHJcbiAgc2V0SW1tZWRpYXRlKGFzeW5jICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IGNvbm5lY3REQigpO1xyXG5cclxuICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsgLy8gWVlZWS1NTS1ERFxyXG5cclxuICAgICAgLy8gVXNlIGZpbmRPbmVBbmRVcGRhdGUgZm9yIGF0b21pYyBvcGVyYXRpb24gKGJldHRlciBmb3IgY29uY3VycmVudCByZXF1ZXN0cylcclxuICAgICAgYXdhaXQgQXBpVXNhZ2UuZmluZE9uZUFuZFVwZGF0ZShcclxuICAgICAgICB7IGFwaUhvc3QgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAkaW5jOiB7XHJcbiAgICAgICAgICAgIHRvdGFsQ2FsbHM6IDEsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3NDYWxsczogc3VjY2VzcyA/IDEgOiAwLFxyXG4gICAgICAgICAgICBmYWlsZWRDYWxsczogc3VjY2VzcyA/IDAgOiAxLFxyXG4gICAgICAgICAgICBbYGRhaWx5U3RhdHMuJHt0b2RheX1gXTogMVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICRzZXQ6IHtcclxuICAgICAgICAgICAgbGFzdENhbGxBdDogbmV3IERhdGUoKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdXBzZXJ0OiB0cnVlLCAvLyBDcmVhdGUgaWYgZG9lc24ndCBleGlzdFxyXG4gICAgICAgICAgbmV3OiB0cnVlLFxyXG4gICAgICAgICAgc2V0RGVmYXVsdHNPbkluc2VydDogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciB0cmFja2luZyBBUEkgY2FsbCBpbiBNb25nb0RCOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuLy8gUmVzZXQgdXNhZ2UgZGF0YSBpbiBNb25nb0RCXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXNldFVzYWdlRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgY29ubmVjdERCKCk7XHJcbiAgICBhd2FpdCBBcGlVc2FnZS5kZWxldGVNYW55KHt9KTtcclxuICAgIGNvbnNvbGUubG9nKCfinIUgVXNhZ2UgZGF0YSByZXNldCBzdWNjZXNzZnVsbHknKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIHJlc2V0dGluZyB1c2FnZSBpbiBNb25nb0RCOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLy8gR2V0IHVzYWdlIHN0YXRzIGZvciBhIHNwZWNpZmljIEFQSVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXBpU3RhdHMoYXBpSG9zdDogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGNvbm5lY3REQigpO1xyXG4gICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBBcGlVc2FnZS5maW5kT25lKHsgYXBpSG9zdCB9KTtcclxuICAgIFxyXG4gICAgaWYgKCF1c2FnZSkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHRvdGFsQ2FsbHM6IDAsXHJcbiAgICAgICAgc3VjY2Vzc0NhbGxzOiAwLFxyXG4gICAgICAgIGZhaWxlZENhbGxzOiAwLFxyXG4gICAgICAgIGxhc3RDYWxsQXQ6IG51bGwsXHJcbiAgICAgICAgZGFpbHlTdGF0czoge31cclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0b3RhbENhbGxzOiB1c2FnZS50b3RhbENhbGxzLFxyXG4gICAgICBzdWNjZXNzQ2FsbHM6IHVzYWdlLnN1Y2Nlc3NDYWxscyxcclxuICAgICAgZmFpbGVkQ2FsbHM6IHVzYWdlLmZhaWxlZENhbGxzLFxyXG4gICAgICBsYXN0Q2FsbEF0OiB1c2FnZS5sYXN0Q2FsbEF0ID8gdXNhZ2UubGFzdENhbGxBdC50b0lTT1N0cmluZygpIDogbnVsbCxcclxuICAgICAgZGFpbHlTdGF0czogT2JqZWN0LmZyb21FbnRyaWVzKHVzYWdlLmRhaWx5U3RhdHMgfHwgbmV3IE1hcCgpKVxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGdldHRpbmcgQVBJIHN0YXRzIGZyb20gTW9uZ29EQjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImNvbm5lY3REQiIsIkFwaVVzYWdlIiwiZ2V0VXNhZ2VEYXRhIiwiYXBpMURhdGEiLCJmaW5kT25lIiwiYXBpSG9zdCIsImFwaTJEYXRhIiwiZGVmYXVsdEFwaVVzYWdlIiwidG90YWxDYWxscyIsInN1Y2Nlc3NDYWxscyIsImZhaWxlZENhbGxzIiwibGFzdENhbGxBdCIsImRhaWx5U3RhdHMiLCJhcGkxIiwidG9JU09TdHJpbmciLCJPYmplY3QiLCJmcm9tRW50cmllcyIsIk1hcCIsImFwaTIiLCJ0b3RhbEFwaUNhbGxzIiwiY3JlYXRlZEF0IiwiRGF0ZSIsImVycm9yIiwiY29uc29sZSIsInRyYWNrQXBpQ2FsbCIsInN1Y2Nlc3MiLCJzZXRJbW1lZGlhdGUiLCJ0b2RheSIsInNwbGl0IiwiZmluZE9uZUFuZFVwZGF0ZSIsIiRpbmMiLCIkc2V0IiwidXBzZXJ0IiwibmV3Iiwic2V0RGVmYXVsdHNPbkluc2VydCIsInJlc2V0VXNhZ2VEYXRhIiwiZGVsZXRlTWFueSIsImxvZyIsImdldEFwaVN0YXRzIiwidXNhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/usage-tracker.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/ApiUsage.ts":
/*!********************************!*\
  !*** ./src/models/ApiUsage.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst ApiUsageSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    apiHost: {\n        type: String,\n        required: true,\n        unique: true,\n        enum: [\n            \"instagram-downloader-v2-scraper-reels-igtv-posts-stories.p.rapidapi.com\",\n            \"instagram-downloader-download-instagram-stories-videos4.p.rapidapi.com\"\n        ]\n    },\n    totalCalls: {\n        type: Number,\n        default: 0\n    },\n    successCalls: {\n        type: Number,\n        default: 0\n    },\n    failedCalls: {\n        type: Number,\n        default: 0\n    },\n    lastCallAt: {\n        type: Date,\n        default: null\n    },\n    dailyStats: {\n        type: Map,\n        of: Number,\n        default: {}\n    }\n}, {\n    timestamps: true\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).ApiUsage || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"ApiUsage\", ApiUsageSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL0FwaVVzYWdlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUVoQyxNQUFNQyxpQkFBaUIsSUFBSUQsd0RBQWUsQ0FBQztJQUN6Q0csU0FBUztRQUNQQyxNQUFNQztRQUNOQyxVQUFVO1FBQ1ZDLFFBQVE7UUFDUkMsTUFBTTtZQUNKO1lBQ0E7U0FDRDtJQUNIO0lBQ0FDLFlBQVk7UUFDVkwsTUFBTU07UUFDTkMsU0FBUztJQUNYO0lBQ0FDLGNBQWM7UUFDWlIsTUFBTU07UUFDTkMsU0FBUztJQUNYO0lBQ0FFLGFBQWE7UUFDWFQsTUFBTU07UUFDTkMsU0FBUztJQUNYO0lBQ0FHLFlBQVk7UUFDVlYsTUFBTVc7UUFDTkosU0FBUztJQUNYO0lBQ0FLLFlBQVk7UUFDVlosTUFBTWE7UUFDTkMsSUFBSVI7UUFDSkMsU0FBUyxDQUFDO0lBQ1o7QUFDRixHQUFHO0lBQ0RRLFlBQVk7QUFDZDtBQUVBLGlFQUFlbkIsd0RBQWUsQ0FBQ3FCLFFBQVEsSUFBSXJCLHFEQUFjLENBQUMsWUFBWUMsZUFBZUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2luc3RhLW9yYml0LWRvd25sb2FkZXIvLi9zcmMvbW9kZWxzL0FwaVVzYWdlLnRzPzVlY2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IEFwaVVzYWdlU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgYXBpSG9zdDoge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICB1bmlxdWU6IHRydWUsXHJcbiAgICBlbnVtOiBbXHJcbiAgICAgICdpbnN0YWdyYW0tZG93bmxvYWRlci12Mi1zY3JhcGVyLXJlZWxzLWlndHYtcG9zdHMtc3Rvcmllcy5wLnJhcGlkYXBpLmNvbScsXHJcbiAgICAgICdpbnN0YWdyYW0tZG93bmxvYWRlci1kb3dubG9hZC1pbnN0YWdyYW0tc3Rvcmllcy12aWRlb3M0LnAucmFwaWRhcGkuY29tJ1xyXG4gICAgXVxyXG4gIH0sXHJcbiAgdG90YWxDYWxsczoge1xyXG4gICAgdHlwZTogTnVtYmVyLFxyXG4gICAgZGVmYXVsdDogMFxyXG4gIH0sXHJcbiAgc3VjY2Vzc0NhbGxzOiB7XHJcbiAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICBkZWZhdWx0OiAwXHJcbiAgfSxcclxuICBmYWlsZWRDYWxsczoge1xyXG4gICAgdHlwZTogTnVtYmVyLFxyXG4gICAgZGVmYXVsdDogMFxyXG4gIH0sXHJcbiAgbGFzdENhbGxBdDoge1xyXG4gICAgdHlwZTogRGF0ZSxcclxuICAgIGRlZmF1bHQ6IG51bGxcclxuICB9LFxyXG4gIGRhaWx5U3RhdHM6IHtcclxuICAgIHR5cGU6IE1hcCxcclxuICAgIG9mOiBOdW1iZXIsXHJcbiAgICBkZWZhdWx0OiB7fVxyXG4gIH1cclxufSwge1xyXG4gIHRpbWVzdGFtcHM6IHRydWVcclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbHMuQXBpVXNhZ2UgfHwgbW9uZ29vc2UubW9kZWwoJ0FwaVVzYWdlJywgQXBpVXNhZ2VTY2hlbWEpO1xyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJBcGlVc2FnZVNjaGVtYSIsIlNjaGVtYSIsImFwaUhvc3QiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ1bmlxdWUiLCJlbnVtIiwidG90YWxDYWxscyIsIk51bWJlciIsImRlZmF1bHQiLCJzdWNjZXNzQ2FsbHMiLCJmYWlsZWRDYWxscyIsImxhc3RDYWxsQXQiLCJEYXRlIiwiZGFpbHlTdGF0cyIsIk1hcCIsIm9mIiwidGltZXN0YW1wcyIsIm1vZGVscyIsIkFwaVVzYWdlIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/ApiUsage.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdownload%2Froute&page=%2Fapi%2Fdownload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdownload%2Froute.ts&appDir=C%3A%5CUsers%5Criyan%5CDownloads%5Ccopy-of-instaorbit-downloader%20(3)1%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Criyan%5CDownloads%5Ccopy-of-instaorbit-downloader%20(3)1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();